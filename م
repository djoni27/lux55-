<!DOCTYPE html>
<html :lang="currentLang" :dir="currentLang === 'ar' ? 'rtl' : 'ltr'">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÿßŸÑŸÖÿ™ÿ¨ÿ± ÿßŸÑÿ®ŸÑÿßÿ™ŸäŸÜŸä | Platinum Studio Pro</title>
    
    <!-- ÿßŸÑŸÖŸÉÿ™ÿ®ÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- ÿÆÿ∑Ÿàÿ∑ ŸÖÿ™ŸÜŸàÿπÿ© -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&family=Cairo:wght@200;900&family=Amiri:wght@400;700&family=Poppins:wght@300;400;700;900&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- ŸÖŸÉÿ™ÿ®ÿ© ÿ∂ÿ∫ÿ∑ ÿßŸÑÿµŸàÿ± -->
    <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
    <!-- ŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        /* === ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ™ÿµŸÖŸäŸÖ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© === */
        [v-cloak] { display: none; }
        body { margin: 0; padding: 0; overflow-x: hidden; background-color: #0f172a; }
        
        #app { 
            min-height: 100vh;
            transition: all 0.5s ease-in-out;
            background-attachment: fixed !important;
            background-position: center !important;
            background-size: cover !important;
            background-repeat: no-repeat !important;
        }

        /* ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ */
        .mode-3d { perspective: 1000px; }
        .mode-3d .product-card { transition: 0.5s; transform-style: preserve-3d; background: rgba(255,255,255,0.95); border-radius: 20px; box-shadow: 0 10px 30px -10px rgba(0,0,0,0.2); }
        .mode-3d .product-card:hover { transform: rotateY(10deg) rotateX(5deg) scale(1.05); }

        .mode-glass .product-card { background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 20px; }
        .mode-neon .product-card { background: #0f172a; border: 1px solid #1e293b; color: white; border-radius: 10px; }
        .mode-neon .product-card:hover { box-shadow: 0 0 20px #3b82f6, 0 0 40px #3b82f6 inset; }

        .mode-luxury .product-card { background: #1a1a1a; border: 1px solid #d4af37; color: #d4af37; border-radius: 4px; }
        .mode-nature .product-card { background: #fdfbf7; border-radius: 20px 40px 20px 40px; border: 2px solid #8ba888; }

        .loader { width: 48px; height: 48px; border: 5px solid #FFF; border-bottom-color: #3b82f6; border-radius: 50%; display: inline-block; animation: rotation 1s linear infinite; }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .upload-btn-wrapper { position: relative; overflow: hidden; cursor: pointer; }
        .upload-btn-wrapper input[type=file] { position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; height: 100%; width: 100%; }
        
        .product-overlay { background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); opacity: 0; transition: 0.3s; }
        .product-card:hover .product-overlay { opacity: 1; }

        .hero-title {
            word-wrap: break-word;
            overflow-wrap: break-word;
            display: block;
            width: 100%;
            z-index: 20;
            position: relative;
        }

        /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿßŸÑÿÆÿ∑Ÿàÿ∑ ŸàÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© */
        [lang="ar"] { font-family: 'Tajawal', sans-serif; }

        /* ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ¨Ÿáÿ≤ÿ© (ŸáŸàÿßÿ™ŸÅ ÿ£ŸÜÿØÿ±ŸàŸäÿØÿå ÿ¢ŸäŸÅŸàŸÜÿå ÿ≠Ÿàÿßÿ≥Ÿäÿ®) */
        @media (max-width: 640px) {
            .hero-title { font-size: 2.5rem !important; }
            header { padding-top: 6rem !important; padding-bottom: 6rem !important; }
            .grid-cols-2 { grid-template-columns: repeat(1, minmax(0, 1fr)); gap: 2rem; }
            .product-card .h-80 { height: 60vh; }
        }
        @media (min-width: 641px) and (max-width: 1024px) {
            .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        @media (min-width: 1025px) {
            .grid-cols-2 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        }
    </style>
</head>
<body>

    <div id="app" v-cloak :style="bodyStyle" :class="'mode-' + data.settings.cardMode" class="flex flex-col">

        <!-- ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ -->
        <div v-if="loading" class="fixed inset-0 z-[999] bg-slate-900 flex flex-col items-center justify-center text-white">
            <span class="loader mb-4"></span>
            <p class="animate-pulse">{{ t.loading }}</p>
        </div>

        <!-- ÿ≤ÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ© -->
        <div class="fixed bottom-6 right-6 z-[100]">
            <button @click="toggleAdmin" class="w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition border-4 border-white/20">
                <i class="fa-solid fa-wand-magic-sparkles text-2xl"></i>
            </button>
        </div>

        <!-- ============================== -->
        <!-- üõ†Ô∏è ÿßÿ≥ÿ™ŸàÿØŸäŸà ÿßŸÑÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ÿßŸÖŸÑ -->
        <!-- ============================== -->
        <div v-if="showAdmin" class="fixed inset-0 z-[110] bg-black/80 backdrop-blur-md flex justify-center items-center p-2 md:p-4 text-slate-800">
            <div class="bg-white w-full max-w-5xl rounded-3xl shadow-2xl overflow-hidden h-[90vh] flex flex-col animate-fade-in-up">
                
                <!-- ÿ±ÿ£ÿ≥ ÿßŸÑÿßÿ≥ÿ™ŸàÿØŸäŸà -->
                <div class="p-4 bg-slate-900 text-white flex justify-between items-center shrink-0">
                    <h2 class="font-bold flex items-center gap-2 text-lg"><i class="fa-solid fa-layer-group text-blue-400"></i> {{ t.adminTitle }}</h2>
                    <div class="flex gap-2">
                        <button @click="saveToCloud" class="bg-green-600 hover:bg-green-500 px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2">
                            <i v-if="saving" class="fa-solid fa-spinner fa-spin"></i>
                            <i v-else class="fa-solid fa-cloud-arrow-up"></i> {{ t.saveBtn }}
                        </button>
                        <button @click="showAdmin = false" class="bg-white/10 hover:bg-white/20 w-8 h-8 rounded-full flex items-center justify-center"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                </div>

                <div class="flex flex-1 overflow-hidden">
                    <!-- ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ¨ÿßŸÜÿ®Ÿäÿ© -->
                    <div class="w-1/4 bg-slate-50 border-l overflow-y-auto p-2 space-y-2">
                        <button v-for="tab in adminTabs" @click="activeTab = tab.id" 
                            :class="activeTab==tab.id ? 'bg-blue-600 text-white shadow-lg' : 'bg-white text-slate-600 hover:bg-slate-200'" 
                            class="w-full text-right p-3 rounded-xl font-bold text-sm transition flex items-center gap-2">
                            <i :class="tab.icon"></i> {{ t[tab.label] }}
                        </button>
                    </div>

                    <!-- ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ÿ®ŸàŸäÿ® -->
                    <div class="w-3/4 p-6 overflow-y-auto bg-slate-100">
                        
                        <!-- 1. ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ± ŸàŸÑÿ∫ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ -->
                        <div v-if="activeTab === 'general'" class="space-y-6">
                            <!-- ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÑÿ∫ÿ© ÿØÿßÿÆŸÑ ÿßŸÑÿßÿ≥ÿ™ŸàÿØŸäŸà -->
                            <div class="bg-white p-5 rounded-2xl shadow-sm space-y-4 border-l-4 border-blue-500">
                                <h3 class="font-bold border-b pb-2 text-slate-500 flex items-center gap-2">
                                    <i class="fa-solid fa-language text-blue-500"></i> {{ t.languageSelect }}
                                </h3>
                                <div class="flex gap-3">
                                    <button v-for="lang in ['ar', 'en', 'fr']" @click="currentLang = lang"
                                        :class="currentLang == lang ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-100 hover:bg-gray-200'"
                                        class="px-6 py-2 rounded-xl font-bold transition uppercase">
                                        {{ lang === 'ar' ? 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' : lang.toUpperCase() }}
                                    </button>
                                </div>
                            </div>

                            <div class="bg-white p-5 rounded-2xl shadow-sm space-y-4">
                                <h3 class="font-bold border-b pb-2 text-slate-500">{{ t.basicInfo }}</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.storeNameLabel }}</label>
                                        <input v-model="data.settings.storeName" class="w-full border p-2 rounded-lg bg-gray-50">
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.phoneLabel }}</label>
                                        <input v-model="data.settings.phone" class="w-full border p-2 rounded-lg bg-gray-50">
                                    </div>
                                    <div class="col-span-2">
                                        <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.heroTitleLabel }}</label>
                                        <input v-model="data.settings.heroTitle" class="w-full border p-2 rounded-lg bg-gray-50">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ¥ÿπÿßÿ± -->
                            <div class="bg-white p-5 rounded-2xl shadow-sm space-y-4">
                                <h3 class="font-bold border-b pb-2 text-slate-500 flex justify-between items-center">
                                    <span>{{ t.logoLabel }}</span>
                                    <button v-if="data.settings.logo" @click="data.settings.logo = ''" class="text-xs text-red-500 hover:bg-red-50 px-2 py-1 rounded transition"><i class="fa-solid fa-trash"></i> {{ t.deleteLogo }}</button>
                                </h3>
                                <div class="flex items-start gap-4">
                                    <img :src="data.settings.logo || 'https://via.placeholder.com/150?text=Logo'" class="h-24 w-24 object-contain border rounded-xl bg-gray-50 p-2 shadow-inner">
                                    <div class="flex-1 space-y-3">
                                        <div class="upload-btn-wrapper bg-blue-50 text-blue-600 border border-blue-200 border-dashed px-4 py-3 rounded-lg text-xs font-bold text-center hover:bg-blue-100 transition">
                                            <i class="fa-solid fa-upload"></i> {{ t.uploadLogo }}
                                            <input type="file" accept="image/*" @change="(e) => handleUpload(e, 'logo')">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 2. ÿßŸÑÿ™ÿµŸÖŸäŸÖ (ÿßŸÑÿπŸÜŸàÿßŸÜ ŸàÿßŸÑÿÆŸÑŸÅŸäÿ© ŸàÿßŸÑÿ£ŸÜŸÖÿßÿ∑) -->
                        <div v-if="activeTab === 'design'" class="space-y-6">
                            <!-- ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ÿ±ÿ≠Ÿäÿ®Ÿä -->
                            <div class="bg-white p-5 rounded-2xl shadow-sm space-y-4">
                                <h3 class="font-bold border-b pb-2 text-slate-500">{{ t.heroStyle }}</h3>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.fontColor }}</label>
                                        <input v-model="data.settings.heroColor" type="color" class="h-10 w-full rounded cursor-pointer border shadow-sm">
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.fontSize }}</label>
                                        <select v-model="data.settings.heroSize" class="w-full border p-2 rounded-lg bg-gray-50 text-sm">
                                            <option value="2.5rem">Small - ÿµÿ∫Ÿäÿ±</option>
                                            <option value="3.5rem">Medium - ŸÖÿ™Ÿàÿ≥ÿ∑</option>
                                            <option value="4.5rem">Large - ŸÉÿ®Ÿäÿ±</option>
                                            <option value="6rem">XL - ÿ∂ÿÆŸÖ</option>
                                        </select>
                                    </div>
                                    <div class="col-span-1">
                                        <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.fontFamily }}</label>
                                        <select v-model="data.settings.heroFont" class="w-full border p-2 rounded-lg bg-gray-50 text-sm">
                                            <option value="'Tajawal', sans-serif">Tajawal - ÿ™ÿ¨ŸàÿßŸÑ</option>
                                            <option value="'Cairo', sans-serif">Cairo - ŸÉÿßŸäÿ±Ÿà</option>
                                            <option value="'Amiri', serif">Amiri - ÿ£ŸÖŸäÿ±Ÿä</option>
                                            <option value="'Poppins', sans-serif">Poppins</option>
                                            <option value="'Roboto', sans-serif">Roboto</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="p-6 border rounded-2xl text-center bg-slate-50 shadow-inner overflow-hidden min-h-[100px] flex items-center justify-center" 
                                     :style="{ color: data.settings.heroColor, fontFamily: data.settings.heroFont, fontSize: '2rem', fontWeight: '900' }">
                                    {{ data.settings.heroTitle }}
                                </div>
                            </div>

                            <!-- ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿÆŸÑŸÅŸäÿ© ÿßŸÑŸÖÿ∑Ÿàÿ±ÿ© -->
                            <div class="bg-white p-5 rounded-2xl shadow-sm space-y-4">
                                <h3 class="font-bold border-b pb-2 text-slate-500 flex justify-between items-center">
                                    <span>{{ t.bgLabel }}</span>
                                    <button v-if="data.settings.bgImage" @click="data.settings.bgImage = ''" class="text-xs text-red-500 px-2 py-1 rounded transition"><i class="fa-solid fa-trash"></i> {{ t.deleteBg }}</button>
                                </h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.bgColorLabel }}</label>
                                        <input v-model="data.settings.bgColor" type="color" class="h-10 w-full rounded border cursor-pointer shadow-sm">
                                    </div>
                                    <div class="flex flex-col justify-end">
                                        <div class="upload-btn-wrapper w-full bg-purple-50 text-purple-600 border border-purple-200 border-dashed px-4 py-2 rounded-lg text-xs font-bold text-center hover:bg-purple-100 transition">
                                            <i class="fa-solid fa-image"></i> {{ t.uploadBg }}
                                            <input type="file" accept="image/*" @change="(e) => handleUpload(e, 'bg')">
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-gray-500 block mb-1">{{ t.bgUrlLabel }}</label>
                                    <input type="text" v-model="data.settings.bgImage" placeholder="https://..." class="w-full border p-2 rounded-lg text-xs bg-gray-50">
                                </div>
                            </div>

                            <!-- ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿπÿ¥ÿ±ÿ© -->
                            <div class="bg-white p-5 rounded-2xl shadow-sm">
                                <h3 class="font-bold border-b pb-4 mb-4 text-slate-500">{{ t.modesLabel }}</h3>
                                <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                                    <button v-for="mode in modes" @click="data.settings.cardMode = mode.id" 
                                        :class="data.settings.cardMode == mode.id ? 'ring-2 ring-blue-500 bg-blue-50' : 'bg-gray-50 hover:bg-gray-100'"
                                        class="p-3 rounded-xl border flex flex-col items-center gap-2 transition shadow-sm">
                                        <i :class="mode.icon" class="text-xl" :style="{color: mode.color}"></i>
                                        <span class="text-[10px] font-bold">{{ mode.name }}</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 3. ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸÜŸäŸÅÿßÿ™ -->
                        <div v-if="activeTab === 'categories'" class="space-y-6">
                            <div class="bg-white p-5 rounded-2xl shadow-sm">
                                <h3 class="font-bold border-b pb-4 mb-4 text-slate-500">{{ t.manageCats }}</h3>
                                <div class="space-y-3">
                                    <div v-for="cat in categories" class="flex items-center justify-between bg-slate-50 p-4 rounded-xl border group hover:border-blue-400 transition">
                                        <span class="font-bold text-slate-700">{{ cat }}</span>
                                        <div class="flex gap-2">
                                            <button @click="promptRenameCategory(cat)" class="text-blue-600 bg-blue-100 px-4 py-1.5 rounded-lg text-xs font-bold hover:bg-blue-200 transition"><i class="fa-solid fa-pen"></i></button>
                                            <button @click="confirmDeleteCategory(cat)" class="text-red-600 bg-red-100 px-4 py-1.5 rounded-lg text-xs font-bold hover:bg-red-200 transition"><i class="fa-solid fa-trash"></i></button>
                                        </div>
                                    </div>
                                    <div v-if="categories.length === 0" class="text-center py-10 text-slate-400">
                                        <i class="fa-solid fa-tag text-5xl mb-4 opacity-10"></i>
                                        <p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµŸÜŸäŸÅÿßÿ™ ÿ®ÿπÿØ</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 4. ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ -->
                        <div v-if="activeTab === 'products'" class="space-y-6">
                            <div class="bg-white p-6 rounded-3xl shadow-xl border-t-8 border-orange-500">
                                <h3 class="font-black text-orange-600 text-xl mb-6 flex justify-between items-center">
                                    <span>{{ isEditing ? t.editProduct : t.addProduct }}</span>
                                    <button v-if="isEditing" @click="cancelEdit" class="text-xs text-red-500 bg-red-50 px-3 py-1 rounded-full"><i class="fa-solid fa-times"></i></button>
                                </h3>
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                    <div class="col-span-2">
                                        <label class="text-[10px] font-bold uppercase text-gray-400">ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨</label>
                                        <input v-model="productForm.name" class="w-full border-2 p-3 rounded-2xl focus:border-orange-500 outline-none transition">
                                    </div>
                                    <div>
                                        <label class="text-[10px] font-bold uppercase text-gray-400">ÿßŸÑÿ≥ÿπÿ±</label>
                                        <input v-model="productForm.price" type="number" class="w-full border-2 p-3 rounded-2xl focus:border-orange-500 outline-none transition">
                                    </div>
                                    <div>
                                        <label class="text-[10px] font-bold uppercase text-gray-400">ÿßŸÑÿ™ÿµŸÜŸäŸÅ</label>
                                        <input v-model="productForm.category" list="catsList" class="w-full border-2 p-3 rounded-2xl focus:border-orange-500 outline-none transition">
                                        <datalist id="catsList"><option v-for="c in categories" :value="c"></option></datalist>
                                    </div>
                                </div>
                                <div class="flex gap-4">
                                    <div class="flex-1 upload-btn-wrapper bg-orange-50 border-2 border-dashed border-orange-200 p-6 text-center rounded-3xl text-orange-600 font-bold hover:bg-orange-100 transition">
                                        <i class="fa-solid fa-camera text-2xl mb-2"></i><br>
                                        <span class="text-xs">{{ t.uploadProductImg }}</span>
                                        <input type="file" accept="image/*" @change="(e) => handleUpload(e, 'product')">
                                    </div>
                                    <div v-if="productForm.image" class="w-32 h-32 rounded-3xl overflow-hidden border-4 border-orange-100 shadow-lg">
                                        <img :src="productForm.image" class="w-full h-full object-cover">
                                    </div>
                                </div>
                                <button @click="saveProduct" class="w-full bg-orange-500 text-white py-4 mt-6 rounded-3xl font-black text-lg shadow-xl hover:bg-orange-600 hover:scale-[1.02] active:scale-[0.98] transition">
                                    {{ isEditing ? t.saveEdit : t.addToList }}
                                </button>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <div v-for="(p, i) in data.products" class="flex items-center gap-3 bg-white p-3 rounded-2xl border hover:shadow-md transition">
                                    <img :src="p.image" class="w-16 h-16 rounded-xl object-cover shadow">
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-bold text-sm truncate">{{ p.name }}</h4>
                                        <p class="text-[10px] text-gray-400 font-bold">{{ p.category }} - {{ p.price }} {{ t.currency }}</p>
                                    </div>
                                    <div class="flex flex-col gap-1">
                                        <button @click="editProduct(i)" class="w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center hover:bg-blue-100 transition"><i class="fa-solid fa-pen text-[10px]"></i></button>
                                        <button @click="deleteProduct(i)" class="w-8 h-8 rounded-full bg-red-50 text-red-600 flex items-center justify-center hover:bg-red-100 transition"><i class="fa-solid fa-trash text-[10px]"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- ============================== -->
        <!-- üè† Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© -->
        <!-- ============================== -->
        
        <nav class="sticky top-0 z-40 backdrop-blur-xl bg-white/20 border-b border-white/10 shadow-sm px-6 py-4 flex justify-between items-center transition-all">
            <div class="flex items-center gap-4">
                <img v-if="data.settings.logo" :src="data.settings.logo" class="h-10 md:h-14 object-contain drop-shadow-lg hover:scale-105 transition">
                <h1 v-else class="text-3xl font-black tracking-tighter" :style="{ color: textColor }">{{ data.settings.storeName }}</h1>
            </div>
            <div @click="showCart = true" class="relative cursor-pointer p-3 rounded-2xl bg-white/10 hover:bg-white/30 backdrop-blur transition-all active:scale-90">
                <i class="fa-solid fa-cart-shopping text-2xl" :style="{ color: textColor }"></i>
                <span v-if="cart.length" class="absolute -top-1 -right-1 bg-red-600 text-white text-[10px] w-6 h-6 flex items-center justify-center rounded-full font-black border-2 border-white animate-bounce">{{ cart.length }}</span>
            </div>
        </nav>

        <header class="py-24 md:py-40 px-6 text-center relative z-10 overflow-hidden">
            <h2 class="hero-title drop-shadow-[0_4px_8px_rgba(0,0,0,0.4)] leading-[1.2] mb-12 transition-all duration-700 animate-fade-in" 
                :style="heroTextStyle">
                {{ data.settings.heroTitle }}
            </h2>
            
            <div class="flex justify-center gap-4 flex-wrap max-w-4xl mx-auto">
                <button @click="filter = 'all'" :class="filter == 'all' ? 'bg-white text-black scale-110 shadow-2xl ring-4 ring-blue-500/20' : 'bg-black/40 text-white hover:bg-black/60'" class="px-8 py-3 rounded-2xl font-black backdrop-blur-xl transition-all border border-white/10 uppercase tracking-widest text-xs">{{ t.all }}</button>
                <button v-for="cat in categories" @click="filter = cat" :class="filter == cat ? 'bg-white text-black scale-110 shadow-2xl ring-4 ring-blue-500/20' : 'bg-black/40 text-white hover:bg-black/60'" class="px-8 py-3 rounded-2xl font-black backdrop-blur-xl transition-all border border-white/10 uppercase tracking-widest text-xs">{{ cat }}</button>
            </div>
        </header>

        <main class="container mx-auto px-6 pb-32">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <div v-for="(p, i) in filteredProducts" :key="i" class="product-card relative group cursor-pointer overflow-hidden flex flex-col h-full animate-fade-in-up" :style="{ animationDelay: (i*0.1)+'s' }" @click="selectedProduct = p">
                    <div class="h-80 overflow-hidden relative bg-slate-200">
                        <img :src="p.image" class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110" loading="lazy">
                        <div class="product-overlay absolute inset-0 flex flex-col justify-end p-6 text-white translate-y-4 group-hover:translate-y-0 opacity-0 group-hover:opacity-100 transition-all duration-300">
                            <p class="text-sm font-bold mb-4 line-clamp-2 drop-shadow-md">{{ p.description || t.viewDetails }}</p>
                            <div class="flex gap-3">
                                <button @click.stop="nativeShare(p)" class="bg-white/20 hover:bg-white/40 w-12 h-12 rounded-2xl backdrop-blur-md flex items-center justify-center transition-all"><i class="fa-solid fa-share-nodes text-lg"></i></button>
                                <button @click.stop="addToCart(p)" class="flex-1 bg-white text-black font-black py-3 rounded-2xl shadow-xl hover:bg-blue-600 hover:text-white transition-all">{{ t.addToCart }}</button>
                            </div>
                        </div>
                        <span class="absolute top-4 right-4 bg-white/95 backdrop-blur text-slate-900 text-[10px] font-black uppercase tracking-tighter px-3 py-1.5 rounded-xl shadow-2xl z-10">{{ p.category }}</span>
                    </div>
                    <div class="p-5 flex flex-col flex-grow bg-white/95 backdrop-blur">
                        <h3 class="font-black text-xl mb-2 leading-none line-clamp-1" :class="textColorClass">{{ p.name }}</h3>
                        <div class="mt-auto flex justify-between items-end">
                            <div class="flex flex-col">
                                <span class="text-xs text-gray-400 font-bold uppercase tracking-widest">{{ t.priceLabel || 'ÿßŸÑÿ≥ÿπÿ±' }}</span>
                                <span class="text-2xl font-black text-blue-600 leading-none">{{ Number(p.price).toLocaleString() }} <small class="text-xs font-bold">{{ t.currency }}</small></span>
                            </div>
                            <div class="w-12 h-12 rounded-2xl bg-slate-900 text-white flex items-center justify-center hover:bg-blue-600 hover:rotate-90 shadow-xl transition-all duration-300">
                                <i class="fa-solid fa-plus text-lg"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ŸàÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ© -->
        <div v-if="selectedProduct" class="fixed inset-0 z-[120] bg-black/90 backdrop-blur-lg flex justify-center items-center p-4 animate-fade-in" @click.self="selectedProduct = null">
            <div class="bg-white w-full max-w-2xl rounded-[40px] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.5)] relative text-slate-800 animate-scale-up">
                <button @click="selectedProduct = null" class="absolute top-6 right-6 bg-slate-100 hover:bg-slate-200 w-12 h-12 rounded-2xl flex items-center justify-center z-10 transition-all"><i class="fa-solid fa-xmark text-xl"></i></button>
                <div class="flex flex-col md:flex-row h-full">
                    <div class="md:w-1/2 h-80 md:h-auto overflow-hidden shadow-2xl">
                        <img :src="selectedProduct.image" class="w-full h-full object-cover">
                    </div>
                    <div class="md:w-1/2 p-10 flex flex-col">
                        <div class="flex justify-between items-start mb-6">
                            <span class="bg-blue-600 text-white px-4 py-1.5 rounded-full text-xs font-black uppercase tracking-widest">{{ selectedProduct.category }}</span>
                        </div>
                        <h2 class="text-4xl font-black mb-4 leading-tight">{{ selectedProduct.name }}</h2>
                        <p class="text-slate-500 mb-10 leading-relaxed text-lg">{{ selectedProduct.description || t.prodDescDefault }}</p>
                        
                        <div class="mt-auto pt-6 border-t border-slate-100">
                            <div class="flex justify-between items-center mb-8">
                                <span class="text-sm font-bold text-slate-400 uppercase tracking-widest">ÿßŸÑŸÖÿ¨ŸÖŸàÿπ</span>
                                <span class="text-4xl font-black text-blue-600">{{ selectedProduct.price }} <small class="text-sm">{{ t.currency }}</small></span>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <button @click="addToCart(selectedProduct); selectedProduct = null" class="bg-slate-900 text-white py-5 rounded-3xl font-black text-lg hover:bg-blue-600 shadow-2xl hover:shadow-blue-500/40 transition-all flex items-center justify-center gap-3"><i class="fa-solid fa-cart-plus"></i> {{ t.addToCart }}</button>
                                <button @click="nativeShare(selectedProduct)" class="bg-slate-100 text-slate-800 py-5 rounded-3xl font-black text-lg hover:bg-slate-200 transition-all flex items-center justify-center gap-3"><i class="fa-solid fa-share-nodes"></i> {{ t.shareProduct }}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÿßŸÑÿ≥ŸÑÿ© ÿßŸÑÿπÿµÿ±Ÿäÿ© -->
        <div v-if="showCart" class="fixed inset-0 z-[120] bg-black/70 backdrop-blur-sm flex justify-end" @click.self="showCart = false">
            <div class="bg-white w-full max-w-md h-full shadow-[0_0_50px_rgba(0,0,0,0.3)] flex flex-col p-8 text-slate-800 animate-slide-in-right">
                <div class="flex justify-between items-center mb-10 border-b border-slate-100 pb-6">
                    <h2 class="text-3xl font-black flex items-center gap-3"><i class="fa-solid fa-bag-shopping text-blue-600"></i> {{ t.cartTitle }}</h2>
                    <button @click="showCart = false" class="bg-slate-100 w-12 h-12 rounded-2xl flex items-center justify-center hover:bg-slate-200 transition-all"><i class="fa-solid fa-xmark text-xl text-slate-400"></i></button>
                </div>
                <div class="flex-1 overflow-y-auto space-y-4 pr-2 custom-scrollbar">
                    <div v-if="cart.length === 0" class="flex flex-col items-center justify-center h-full text-slate-300">
                        <i class="fa-solid fa-shopping-basket text-8xl mb-6 opacity-20"></i>
                        <p class="text-xl font-bold">{{ t.emptyCart }}</p>
                    </div>
                    <div v-for="(item, i) in cart" class="group flex gap-4 bg-slate-50 p-4 rounded-3xl items-center border border-transparent hover:border-blue-200 transition-all duration-300">
                        <img :src="item.image" class="w-20 h-20 rounded-2xl object-cover shadow-lg group-hover:scale-105 transition-transform">
                        <div class="flex-1">
                            <h4 class="font-black text-lg leading-tight">{{ item.name }}</h4>
                            <span class="text-blue-600 font-black text-md mt-1 block">{{ item.price }} {{ t.currency }}</span>
                        </div>
                        <button @click="cart.splice(i, 1)" class="w-10 h-10 rounded-2xl bg-red-50 text-red-500 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 hover:bg-red-500 hover:text-white"><i class="fa-solid fa-trash text-sm"></i></button>
                    </div>
                </div>
                <div v-if="cart.length > 0" class="border-t border-slate-100 pt-8 mt-8">
                    <div class="flex justify-between items-center font-black text-2xl mb-8">
                        <span class="text-slate-400 text-sm uppercase tracking-widest">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®ŸÑÿ∫</span>
                        <span class="text-blue-600">{{ cartTotal.toLocaleString() }} <small class="text-sm">{{ t.currency }}</small></span>
                    </div>
                    <button @click="checkout" class="w-full bg-green-500 text-white py-6 rounded-3xl font-black text-xl shadow-[0_20px_40px_rgba(34,197,94,0.3)] flex justify-center items-center gap-4 hover:bg-green-600 hover:translate-y-[-4px] transition-all active:scale-95">
                        <i class="fa-brands fa-whatsapp text-3xl"></i> {{ t.checkoutBtn }}
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script>
        const { createApp } = Vue;

        const TRANSLATIONS = {
            ar: {
                loading: "ÿ¨ÿßÿ±Ÿä ÿ™ÿ¨ŸáŸäÿ≤ ÿßŸÑŸÖÿ™ÿ¨ÿ± ÿßŸÑÿ®ŸÑÿßÿ™ŸäŸÜŸä...",
                adminTitle: "ÿßÿ≥ÿ™ŸàÿØŸäŸà ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä",
                saveBtn: "ÿ≠ŸÅÿ∏ ŸàŸÜÿ¥ÿ± ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™",
                basicSettings: "ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©",
                designSettings: "ÿßŸÑÿ™ÿµŸÖŸäŸÖ ŸàÿßŸÑŸÖÿ∏Ÿáÿ±",
                manageCats: "ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿµŸÜŸäŸÅÿßÿ™",
                manageProds: "ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™",
                basicInfo: "ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ™ÿ¨ÿ±",
                languageSelect: "ŸÑÿ∫ÿ© ÿßŸÑŸÖÿ™ÿ¨ÿ±",
                storeNameLabel: "ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ™ÿ¨ÿ± ÿßŸÑÿ±ÿ≥ŸÖŸä",
                phoneLabel: "ÿ±ŸÇŸÖ ÿßŸÑŸàÿßÿ™ÿ≥ÿßÿ® (ŸÖÿ´ÿßŸÑ: 213555555555)",
                heroTitleLabel: "ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ÿ±ÿ≠Ÿäÿ®Ÿä ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä",
                logoLabel: "ÿ¥ÿπÿßÿ± ÿßŸÑŸÖÿ™ÿ¨ÿ±",
                deleteLogo: "ÿ≠ÿ∞ŸÅ ÿßŸÑÿ¥ÿπÿßÿ±",
                uploadLogo: "ÿ±ŸÅÿπ ÿ¥ÿπÿßÿ± ÿ¨ÿØŸäÿØ",
                heroStyle: "ÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä",
                fontColor: "ŸÑŸàŸÜ ÿßŸÑÿÆÿ∑",
                fontSize: "ÿ≠ÿ¨ŸÖ ÿßŸÑÿÆÿ∑",
                fontFamily: "ŸÜŸàÿπ ÿßŸÑÿÆÿ∑ ÿßŸÑÿπÿ±ÿ®Ÿä",
                bgLabel: "ÿÆŸÑŸÅŸäÿ© ÿßŸÑŸÖŸàŸÇÿπ",
                bgColorLabel: "ŸÑŸàŸÜ ÿßŸÑÿÆŸÑŸÅŸäÿ©",
                bgUrlLabel: "ÿ±ÿßÿ®ÿ∑ ÿµŸàÿ±ÿ© ÿßŸÑÿÆŸÑŸÅŸäÿ©",
                deleteBg: "ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿÆŸÑŸÅŸäÿ©",
                uploadBg: "ÿ±ŸÅÿπ ÿµŸàÿ±ÿ© ÿÆŸÑŸÅŸäÿ©",
                modesLabel: "ÿ™ŸÜÿ≥ŸäŸÇ ÿπÿ±ÿ∂ ÿßŸÑÿ®ÿ∑ÿßŸÇÿßÿ™ (10)",
                all: "ÿßŸÑŸÉŸÑ",
                currency: "ÿØ.ÿ¨",
                cartTitle: "ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™",
                emptyCart: "ÿ≥ŸÑÿ™ŸÉ ŸÅÿßÿ±ÿ∫ÿ© ÿ≠ÿßŸÑŸäÿßŸã",
                total: "ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÉŸÑŸä",
                checkoutBtn: "ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®",
                viewDetails: "ÿßÿ∂ÿ∫ÿ∑ ŸÑŸÖÿπÿßŸäŸÜÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨",
                addToCart: "ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ©",
                shareProduct: "ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨",
                prodDescDefault: "ŸÖŸÜÿ™ÿ¨ ÿ®ÿ¨ŸàÿØÿ© ŸÅÿßÿÆÿ±ÿ© Ÿàÿ™ÿµŸÖŸäŸÖ ÿπÿµÿ±Ÿä.",
                addProduct: "ŸÖŸÜÿ™ÿ¨ ÿ¨ÿØŸäÿØ",
                editProduct: "ÿ™ÿπÿØŸäŸÑ ŸÖŸÜÿ™ÿ¨",
                prodNamePlaceholder: "ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨",
                pricePlaceholder: "ÿßŸÑÿ≥ÿπÿ±",
                catPlaceholder: "ÿßŸÑÿ™ÿµŸÜŸäŸÅ",
                uploadProductImg: "ÿµŸàÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨",
                addToList: "ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑŸÖÿ™ÿ¨ÿ±",
                saveEdit: "ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™",
                edit: "ÿ™ÿπÿØŸäŸÑ",
                delete: "ÿ≠ÿ∞ŸÅ"
            },
            en: {
                loading: "Loading Platinum Studio...",
                adminTitle: "Pro Management Studio",
                saveBtn: "Save & Go Live",
                basicSettings: "General",
                designSettings: "Appearance",
                manageCats: "Categories",
                manageProds: "Inventory",
                basicInfo: "Store Identity",
                languageSelect: "Interface Language",
                storeNameLabel: "Official Store Name",
                phoneLabel: "WhatsApp Contact",
                heroTitleLabel: "Main Heading",
                logoLabel: "Branding Logo",
                deleteLogo: "Remove Logo",
                uploadLogo: "Upload New Logo",
                heroStyle: "Heading Styling",
                fontColor: "Text Color",
                fontSize: "Font Size",
                fontFamily: "Typeface",
                bgLabel: "Background Image",
                bgColorLabel: "Background Color",
                bgUrlLabel: "Background URL",
                deleteBg: "Clear Background",
                uploadBg: "Upload Background",
                modesLabel: "Card Layouts (10)",
                all: "All",
                currency: "DA",
                cartTitle: "Shopping Cart",
                emptyCart: "Cart is empty",
                total: "Grand Total",
                checkoutBtn: "Order via WhatsApp",
                viewDetails: "Product Details",
                addToCart: "Add to Bag",
                shareProduct: "Share This",
                prodDescDefault: "High-end premium quality.",
                addProduct: "New Item",
                editProduct: "Modify Item",
                prodNamePlaceholder: "Title",
                pricePlaceholder: "Price",
                catPlaceholder: "Tag",
                uploadProductImg: "Snap Product Image",
                addToList: "Launch Item",
                saveEdit: "Update Item",
                edit: "Edit",
                delete: "Delete"
            },
            fr: {
                loading: "Chargement du Studio...",
                adminTitle: "Studio d'Administration",
                saveBtn: "Publier",
                basicSettings: "G√©n√©ral",
                designSettings: "Design",
                manageCats: "Cat√©gories",
                manageProds: "Produits",
                basicInfo: "Identit√©",
                languageSelect: "Langue",
                storeNameLabel: "Nom du Store",
                phoneLabel: "WhatsApp Contact",
                heroTitleLabel: "Titre Principal",
                logoLabel: "Logo Officiel",
                deleteLogo: "Supprimer",
                uploadLogo: "Charger un logo",
                heroStyle: "Style du titre",
                fontColor: "Couleur",
                fontSize: "Taille",
                fontFamily: "Police",
                bgLabel: "Arri√®re-plan",
                bgColorLabel: "Couleur de fond",
                bgUrlLabel: "URL Image",
                deleteBg: "Effacer le fond",
                uploadBg: "Charger un fond",
                modesLabel: "Mise en page (10)",
                all: "Tout",
                currency: "DA",
                cartTitle: "Votre Panier",
                emptyCart: "Le panier est vide",
                total: "Total",
                checkoutBtn: "Commander par WhatsApp",
                viewDetails: "D√©tails du produit",
                addToCart: "Ajouter au panier",
                shareProduct: "Partager",
                prodDescDefault: "Qualit√© Platine Premium.",
                addProduct: "Nouveau Produit",
                editProduct: "Modifier Produit",
                prodNamePlaceholder: "Nom",
                pricePlaceholder: "Prix",
                catPlaceholder: "Cat√©gorie",
                uploadProductImg: "Image Produit",
                addToList: "Ajouter",
                saveEdit: "Mettre √† jour",
                edit: "Modifier",
                delete: "Supprimer"
            }
        };

        const DEFAULT_DATA = {
            settings: {
                storeName: "Platinum Store",
                heroTitle: "Premium Quality & Modern Elegance",
                phone: "213",
                bgColor: "#f8fafc",
                bgImage: "",
                logo: "",
                cardMode: "3d",
                heroColor: "#ffffff",
                heroFont: "'Tajawal', sans-serif",
                heroSize: "4.5rem"
            },
            products: [
                { name: "Platinum Timepiece", price: 15000, category: "Luxury", description: "Precision and style combined.", image: "https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=800&q=80" },
                { name: "Urban Tech Shoes", price: 12000, category: "Fashion", description: "Designed for comfort and performance.", image: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800&q=80" },
                { name: "Pro Lens Camera", price: 85000, category: "Electronics", description: "Capture every detail.", image: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=800&q=80" }
            ]
        };

        createApp({
            data() {
                return {
                    currentLang: 'ar',
                    loading: true, saving: false, showAdmin: false, showCart: false,
                    cart: [], filter: 'all', selectedProduct: null, activeTab: 'general',
                    data: JSON.parse(JSON.stringify(DEFAULT_DATA)),
                    productForm: { name: '', price: '', category: '', image: '', description: '' },
                    isEditing: false, editingIndex: -1, tempLogoUrl: '',
                    adminTabs: [
                        {id: 'general', label: 'basicSettings', icon: 'fa-solid fa-gear'},
                        {id: 'design', label: 'designSettings', icon: 'fa-solid fa-palette'},
                        {id: 'categories', label: 'manageCats', icon: 'fa-solid fa-tags'},
                        {id: 'products', label: 'manageProds', icon: 'fa-solid fa-boxes-stacked'}
                    ],
                    modes: [
                        {id: 'minimal', name: 'Minimal', icon: 'fa-regular fa-square', color: '#333'},
                        {id: '3d', name: '3D Pop', icon: 'fa-solid fa-cube', color: '#2563eb'},
                        {id: 'neon', name: 'Neon', icon: 'fa-solid fa-bolt', color: '#a855f7'},
                        {id: 'glass', name: 'Glass', icon: 'fa-solid fa-wine-glass', color: '#0ea5e9'},
                        {id: 'luxury', name: 'Luxury', icon: 'fa-solid fa-crown', color: '#d4af37'},
                        {id: 'comic', name: 'Comic', icon: 'fa-solid fa-comment-dots', color: '#000'},
                        {id: 'gradient', name: 'Gradient', icon: 'fa-solid fa-palette', color: '#ff00cc'},
                        {id: 'clay', name: 'Clay', icon: 'fa-solid fa-cloud', color: '#94a3b8'},
                        {id: 'cyber', name: 'Cyber', icon: 'fa-solid fa-robot', color: '#fcee0a'},
                        {id: 'nature', name: 'Nature', icon: 'fa-solid fa-leaf', color: '#16a34a'},
                    ]
                }
            },
            computed: {
                t() { return TRANSLATIONS[this.currentLang]; },
                categories() { return [...new Set(this.data.products.map(p => p.category))]; },
                filteredProducts() { 
                    return this.filter === 'all' ? this.data.products : this.data.products.filter(p => p.category === this.filter);
                },
                cartTotal() { return this.cart.reduce((s, i) => s + Number(i.price), 0) },
                bodyStyle() {
                    let style = {};
                    if (this.data.settings.bgImage) {
                        style.backgroundImage = `url('${this.data.settings.bgImage}')`;
                        style.backgroundSize = 'cover';
                        style.backgroundPosition = 'center';
                        style.backgroundAttachment = 'fixed';
                    } else {
                        style.backgroundColor = this.data.settings.bgColor || '#f8fafc';
                        style.backgroundImage = 'none';
                    }
                    return style;
                },
                heroTextStyle() {
                    return {
                        color: this.data.settings.heroColor,
                        fontFamily: this.data.settings.heroFont,
                        fontSize: this.data.settings.heroSize,
                        fontWeight: '900',
                        textAlign: 'center'
                    }
                },
                textColor() {
                    return (this.data.settings.cardMode === 'neon' || this.data.settings.bgImage) ? 'white' : '#0f172a';
                },
                textColorClass() {
                    return (this.data.settings.cardMode === 'neon' || this.data.settings.cardMode === 'luxury') ? 'text-inherit' : 'text-slate-800';
                }
            },
            methods: {
                async handleUpload(event, type) {
                    const file = event.target.files[0];
                    if (!file) return;
                    try {
                        const compressedFile = await imageCompression(file, { maxSizeMB: 0.3, maxWidthOrHeight: 1200 });
                        const reader = new FileReader();
                        reader.readAsDataURL(compressedFile);
                        reader.onload = () => {
                            if (type === 'logo') this.data.settings.logo = reader.result;
                            else if (type === 'bg') {
                                this.data.settings.bgImage = reader.result;
                            }
                            else if (type === 'product') this.productForm.image = reader.result;
                        };
                    } catch (e) { console.error(e); }
                },
                saveToCloud() {
                    this.saving = true;
                    localStorage.setItem('platinumStoreData', JSON.stringify(this.data));
                    setTimeout(() => {
                        this.saving = false;
                        Swal.fire({ icon: 'success', title: 'ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ÿ®ŸÜÿ¨ÿßÿ≠', timer: 1000, showConfirmButton: false });
                    }, 500);
                },
                saveProduct() {
                    if(!this.productForm.name || !this.productForm.image) return Swal.fire('ÿÆÿ∑ÿ£', 'ÿßŸÑÿßÿ≥ŸÖ ŸàÿßŸÑÿµŸàÿ±ÿ© ÿ∂ÿ±Ÿàÿ±ŸäÿßŸÜ', 'warning');
                    if(this.isEditing) this.data.products[this.editingIndex] = { ...this.productForm };
                    else this.data.products.unshift({ ...this.productForm });
                    this.cancelEdit();
                    Swal.fire({ icon: 'success', title: 'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ™ÿ¨ÿ±', timer: 1000, showConfirmButton: false });
                },
                editProduct(i) { this.productForm = { ...this.data.products[i] }; this.isEditing = true; this.editingIndex = i; },
                deleteProduct(i) { this.data.products.splice(i, 1); },
                cancelEdit() { this.isEditing = false; this.productForm = { name: '', price: '', category: '', image: '', description: '' }; },
                addToCart(p) { this.cart.push(p); },
                toggleAdmin() {
                    Swal.fire({ title: 'ÿ±ŸÖÿ≤ ÿßŸÑÿØÿÆŸàŸÑ', input: 'password', showCancelButton: true }).then((r) => {
                        if (r.value === '1234') this.showAdmin = true;
                    });
                },
                promptRenameCategory(oldName) {
                    Swal.fire({ title: 'ÿ•ÿπÿßÿØÿ© ÿ™ÿ≥ŸÖŸäÿ© ÿßŸÑÿ™ÿµŸÜŸäŸÅ', input: 'text', inputValue: oldName }).then(r => {
                        if(r.value) {
                            this.data.products.forEach(p => { if(p.category === oldName) p.category = r.value; });
                        }
                    });
                },
                confirmDeleteCategory(cat) {
                    Swal.fire({ title: 'ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ÿµŸÜŸäŸÅÿü', text: 'ÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ™ÿ≠ÿ™ Ÿáÿ∞ÿß ÿßŸÑÿ™ÿµŸÜŸäŸÅ', icon: 'warning', showCancelButton: true }).then(r => {
                        if(r.isConfirmed) this.data.products = this.data.products.filter(p => p.category !== cat);
                    });
                },
                checkout() {
                    let msg = `üõçÔ∏è ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ ŸÖŸÜ ŸÖÿ™ÿ¨ÿ± ${this.data.settings.storeName}:\n\n`;
                    this.cart.forEach(p => msg += `‚Ä¢ ${p.name} (${p.price} ${this.t.currency})\n`);
                    msg += `\nüí∞ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: ${this.cartTotal} ${this.t.currency}`;
                    window.open(`https://wa.me/${this.data.settings.phone}?text=${encodeURIComponent(msg)}`, '_blank');
                },
                nativeShare(p) {
                    if(navigator.share) navigator.share({ title: p.name, text: p.description, url: window.location.href });
                    else Swal.fire('ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉÿ©!', p.name, 'success');
                }
            },
            mounted() {
                const saved = localStorage.getItem('platinumStoreData');
                if(saved) this.data = JSON.parse(saved);
                this.loading = false;
            }
        }).mount('#app');
    </script>
</body>
</html>
